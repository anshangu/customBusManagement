(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-802c"],{1524:function(t,e,n){"use strict";var a=n("67c4"),i=n.n(a);i.a},"49e5":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container pull-auto"},[n("basic-container",[n("avue-crud",{ref:"crud",attrs:{page:t.page,data:t.tableData,"table-loading":t.tableLoading,option:t.tableOption},on:{"current-change":t.currentChange,"refresh-change":t.refreshChange,"size-change":t.sizeChange,"row-update":t.handleUpdate,"row-save":t.handleSave,"row-del":t.rowDel},scopedSlots:t._u([{key:"menu",fn:function(e){return[t.permissions.tcapp_custbusdetail_edit?n("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small",plain:""},on:{click:function(n){t.handleEdit(e.row,e.index)}}},[t._v("编辑")]):t._e(),t.permissions.tcapp_custbusdetail_del?n("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:function(n){t.handleDel(e.row,e.index)}}},[t._v("删除")]):t._e()]}}])},[n("template",{slot:"menuLeft"},[t.permissions.tcapp_custbusdetail_add?n("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.handleAdd}},[t._v("新增")]):t._e(),n("br"),n("br")],1)],2)],1)],1)},i=[],s=(n("f751"),n("c93e")),c=(n("cadf"),n("551c"),n("097d"),n("d122")),o=n("757c"),r=n("5880"),u={name:"custbusdetail",data:function(){return{tableData:[],page:{total:0,currentPage:1,pageSize:20},listQuery:{page:1,limit:20},tableLoading:!1,tableOption:o["a"]}},created:function(){this.getList()},mounted:function(){console.log(this.$route.query)},computed:Object(s["a"])({},Object(r["mapGetters"])(["permissions"])),methods:{getList:function(){var t=this;this.tableLoading=!0,Object(c["c"])(this.listQuery,this.$route.query.id).then(function(e){console.log(e.data.data),t.tableData=e.data.data||e.data.records,t.page.total=e.data.data.length||e.data.total,t.tableLoading=!1})},currentChange:function(t){this.page.currentPage=t,this.listQuery.page=t,this.getList()},sizeChange:function(t){this.page.pageSize=t,this.listQuery.limit=t,this.getList()},handleAdd:function(){this.$refs.crud.rowAdd()},handleEdit:function(t,e){this.$refs.crud.rowEdit(t,e)},handleDel:function(t,e){this.$refs.crud.rowDel(t,e)},rowDel:function(t,e){var n=this;this.$confirm("是否确认删除ID为"+t.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return Object(c["b"])(t.id)}).then(function(t){n.tableData.splice(e,1),n.$message({showClose:!0,message:"删除成功",type:"success"})}).catch(function(t){})},handleUpdate:function(t,e,n){var a=this;Object(c["f"])(t).then(function(t){a.refreshChange(),a.$message({showClose:!0,message:"修改成功",type:"success"}),n()})},handleSave:function(t,e){var n=this;Object(c["a"])(t).then(function(a){n.tableData.push(Object.assign({},t)),n.$message({showClose:!0,message:"添加成功",type:"success"}),e()})},refreshChange:function(){this.getList()}}},l=u,d=(n("1524"),n("2877")),p=Object(d["a"])(l,a,i,!1,null,"cdace23c",null);p.options.__file="index.vue";e["default"]=p.exports},"67c4":function(t,e,n){},"757c":function(t,e,n){"use strict";n.d(e,"a",function(){return a});var a={border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",delBtn:!0,dic:[],column:[{label:"站点名称",prop:"station_name",align:"center"},{label:"详细地址",prop:"station_des",align:"center"},{label:"经度",prop:"station_lon",align:"center"},{label:"维度",prop:"station_lat",align:"center"},{label:"到站时间",prop:"arr_time",align:"center"}]}},d122:function(t,e,n){"use strict";n.d(e,"c",function(){return c}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return r}),n.d(e,"f",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"e",function(){return d});n("28a5");var a=n("6bde"),i=n("b5c6");function s(t){if("object"==Object(a["a"])(t)){for(var e in t)!t.hasOwnProperty(e)||null!=t[e]&&void 0!=t[e]&&""!=t[e]||delete t[e];return t}}function c(t,e){return Object(i["a"])({url:"/custombus/webapi/custbus/detail/".concat(e),method:"get"})}function o(t){return Object(i["a"])({url:"/custombus/webapi/custbus/detail/".concat(location.hash.split("=")[1],"/add"),method:"post",data:{name:t.station_name,des:t.station_des,lon:t.station_lon,lat:t.station_lat,arr_time:t.arr_time}})}function r(t){return Object(i["a"])({url:"/custombus/webapi/custbus/detail/del?ids=".concat(encodeURI(JSON.stringify([t]))),method:"delete"})}function u(t){return Object(i["a"])({url:"/custombus/webapi/custbus/detail/edit/".concat(t.id),method:"PUT",data:{id:t.id,arr_time:t.arr_time,des:t.station_des,lat:t.station_lat,lon:t.station_lon,name:t.station_name}})}function l(t){return Object(i["a"])({url:"/custombus/webapi/custbus/line_points?id=".concat(t.id),method:"get"})}function d(t){return Object(i["a"])({url:"/custombus/webapi/custbus/draw_line",method:"post",data:s(t)})}}}]);