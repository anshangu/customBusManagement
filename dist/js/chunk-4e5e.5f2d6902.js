(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e5e"],{"2d5c":function(e,t,a){},"9bbf":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"dz-header"},[e._v("包车旅游")]),a("div",{staticClass:"app-container pull-auto"},[a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.hireBus,"table-loading":e.tableLoading,option:e.tableOption},on:{"current-change":e.currentChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.rowDel},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permissions.tcapp_custbus_edit?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small",plain:""},on:{click:function(a){e.handleEdit(t.row,t.index)}}},[e._v("编辑")]):e._e(),e.permissions.tcapp_custbus_del?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:function(a){e.handleDel(t.row,t.index)}}},[e._v("删除")]):e._e()]}}])})],1)],1)])},i=[],s=(a("f751"),a("c93e")),c=(a("cadf"),a("551c"),a("097d"),a("b5c6"));function l(e){return Object(c["a"])({url:"/custombus/webapi/custbus/complete/list",method:"get",params:e})}function o(e){return console.log(e),Object(c["a"])({url:"/custombus/webapi/custbus/complete/".concat(e.id,"/").concat(e.complete_state),method:"put"})}var r={state:[{label:"未处理",value:0,color:"green"},{label:"已处理",value:1,color:"green"},{label:"不处理",value:2,color:"red"}]},d={border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",editBtn:!0,delBtn:!1,viewBtn:!1,dicData:r,menuWidth:400,addBtn:!1,column:[{label:"始发站",prop:"start_name",align:"center",editVisdiplay:!1},{label:"始发站详细地址",prop:"start_des",align:"center",editVisdiplay:!1},{label:"始发站经度",prop:"start_lon",align:"center",editVisdiplay:!1},{label:"始发站纬度",prop:"start_lat",align:"center",editVisdiplay:!1},{label:"终点站",prop:"end_name",align:"center",editVisdiplay:!1},{label:"终点站详细地址",prop:"end_des",align:"center",editVisdiplay:!1},{label:"终点站经度",prop:"end_lon",align:"center",editVisdiplay:!1},{label:"终点站纬度",prop:"end_lat",align:"center",editVisdiplay:!1},{label:"手机号",prop:"mobile",align:"center",editVisdiplay:!1},{label:"创建时间",prop:"created_at",align:"center",editVisdiplay:!1},{label:"使用天数",prop:"days",align:"center",editVisdiplay:!1},{label:"当前状态",prop:"complete_state",align:"center",type:"select",valueDefault:1,dicData:"state"}]},u=a("5880"),p={name:"custbus",data:function(){return{line:!1,isLine:!1,hireBus:[],page:{total:0,currentPage:1,pageSize:20},listQuery:{page:1,size:20},tableLoading:!1,tableOption:d}},created:function(){this.getList()},mounted:function(){},computed:Object(s["a"])({},Object(u["mapGetters"])(["permissions"])),methods:{getList:function(){var e=this;this.tableLoading=!0,l(this.listQuery).then(function(t){e.hireBus=t.data.data.result||t.data.records,e.page.total=+t.data.data.total_count||+t.data.total,e.tableLoading=!1}).catch(function(t){e.tableLoading=!1})},currentChange:function(e){this.page.currentPage=e,this.listQuery.page=e,this.getList()},handleStock:function(e){location.href="#/custombus/stock?id=".concat(e.id)},handleClick:function(e){location.href="#/custombus/custbusdetail?id=".concat(e.id)},sizeChange:function(e){this.page.pageSize=e,this.listQuery.size=e,this.getList()},handleAdd:function(){this.line=!0},handleCell:function(e,t){this.updateLine=e,this.isLine=!0},handleEdit:function(e,t){this.$refs.crud.rowEdit(e,t)},handleDel:function(e,t){this.$refs.crud.rowDel(e,t)},rowDel:function(e,t){var a=this;this.$confirm("是否确认删除ID为"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return delObj(e.id)}).then(function(e){a.tableData.splice(t,1),a.$message({showClose:!0,message:"删除成功",type:"success"})}).catch(function(e){})},handleUpdate:function(e,t,a){var n=this;o(e).then(function(e){n.refreshChange(),n.$message({showClose:!0,message:"修改成功",type:"success"}),a()})},handleSave:function(e,t){var a=this;e.city_code="610300",e.original_amt=100*e.original_amt,"上行"===e.towards?e.towards=0:"下行"===e.towards&&(e.towards=1);var n=!1;2===e.amt_type&&+e.discount?(e.discount=+e.discount,n=!0):3===e.amt_type&&+e.discount?(e.discount=+e.discount,n=!0):1!==e.amt_type||e.discount||(n=!0),n&&addObj(e).then(function(n){a.tableData.push(Object.assign({},e)),a.$message({showClose:!0,message:"添加成功",type:"success"}),t()})},refreshChange:function(){this.getList()}}},h=p,g=(a("fdc7"),a("2877")),b=Object(g["a"])(h,n,i,!1,null,"2658f38f",null);b.options.__file="index.vue";t["default"]=b.exports},fdc7:function(e,t,a){"use strict";var n=a("2d5c"),i=a.n(n);i.a}}]);