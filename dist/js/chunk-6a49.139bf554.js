(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a49"],{"2b99":function(e,t,a){"use strict";var n=a("58ed"),i=a.n(n);i.a},"58ed":function(e,t,a){},"8e7b":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container pull-auto"},[a("view",[e._v("新增票日期不能重复")]),a("basic-container",[a("avue-crud",{ref:"crud",attrs:{page:e.page,data:e.tableData,"table-loading":e.tableLoading,option:e.tableOption},on:{"current-change":e.currentChange,"refresh-change":e.refreshChange,"size-change":e.sizeChange,"row-update":e.handleUpdate,"row-save":e.handleSave,"row-del":e.rowDel},scopedSlots:e._u([{key:"menu",fn:function(t){return[e.permissions.tcapp_custbusstock_edit?a("el-button",{attrs:{type:"primary",icon:"el-icon-check",size:"small",plain:""},on:{click:function(a){e.handleEdit(t.row,t.index)}}},[e._v("编辑")]):e._e(),e.permissions.tcapp_custbusstock_del?a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:function(a){e.handleDel(t.row,t.index)}}},[e._v("删除")]):e._e()]}}])},[a("template",{slot:"menuLeft"},[e.permissions.tcapp_custbusstock_add?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.handleAdd}},[e._v("新 增")]):e._e(),a("br"),a("br")],1)],2)],1)],1)},i=[],s=a("c93e"),c=a("b5c6");function r(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(c["a"])({url:"/custombus/webapi/custbus/ticket/".concat(t,"/web"),method:"get",params:e})}function o(e,t){return Object(c["a"])({url:"/custombus/webapi/custbus/detail/".concat(t,"/ticket/add"),method:"post",data:{cust_bus_date:e.cust_bus_date,publish:e.publish}})}function u(e){return Object(c["a"])({url:"/tcapp/custbusstock/"+e,method:"delete"})}function l(e){return console.log(e),Object(c["a"])({url:"/custombus/webapi//custbus/detail/ticket/edit/".concat(e.id),method:"put",data:e})}var d={border:!0,index:!0,stripe:!0,menuAlign:"center",align:"center",editBtn:!0,delBtn:!1,addBtn:!0,height:700,dic:[],column:[{label:"id",prop:"id",align:"center",hide:!0,addDisabled:!0,addVisdiplay:!1,editDisabled:!0,editVisdiplay:!1},{label:"出发日期",prop:"cust_bus_date",align:"center",placeholder:"请输入日期 示例 2018-10-01",span:24,rules:[{required:!0,message:"输入出发日期 示例 2018-10-01",trigger:"blur"}]},{label:"发行数量",prop:"publish",align:"center",span:24,rules:[{required:!0,message:"请输入发行数量",trigger:"blur"}]},{label:"库存数量",prop:"stock",align:"center",addDisabled:!0,editDisabled:!0,addVisdiplay:!1,editVisdiplay:!1}]},p=a("5880"),h={name:"custbusstock",data:function(){return{tableData:[],page:{total:0,currentPage:1,pageSize:20},listQuery:{page:1,size:20},tableLoading:!1,tableOption:d}},created:function(){this.getList()},mounted:function(){},computed:Object(s["a"])({},Object(p["mapGetters"])(["permissions"])),methods:{getList:function(){var e=this;this.tableLoading=!0,r(this.listQuery,this.$route.query.id).then(function(t){console.log(t.data),e.tableData=t.data.data.result,e.page.total=t.data.data.total_count,e.tableLoading=!1})},currentChange:function(e){this.page.currentPage=e,this.listQuery.page=e,this.getList()},sizeChange:function(e){this.page.pageSize=e,this.listQuery.size=e,this.getList()},handleAdd:function(){this.$refs.crud.rowAdd()},handleEdit:function(e,t){this.$refs.crud.rowEdit(e,t)},handleDel:function(e,t){this.$refs.crud.rowDel(e,t)},rowDel:function(e,t){var a=this;this.$confirm("是否确认删除ID为"+e.id,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){return u(e.clientId)}).then(function(e){a.tableData.splice(t,1),a.$message({showClose:!0,message:"删除成功",type:"success"})}).catch(function(e){})},handleUpdate:function(e,t,a){var n=this;l(e).then(function(e){n.$message({showClose:!0,message:"修改成功",type:"success"}),n.refreshChange(),a()})},handleSave:function(e,t){var a=this;console.log(this.$route.query.id),o(e,this.$route.query.id).then(function(e){a.$message({showClose:!0,message:"添加成功",type:"success"}),a.refreshChange(),t()})},refreshChange:function(){this.getList()}}},b=h,g=(a("2b99"),a("2877")),f=Object(g["a"])(b,n,i,!1,null,"f2e40e0a",null);f.options.__file="index.vue";t["default"]=f.exports}}]);